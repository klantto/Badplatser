<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Badplatser i Västra Götalandsregionen</title>
  <style>
    body { font-family: sans-serif; padding: 2em; background: #eef9ff; }
    h1 { color: #003366; }
    .badplats {
      background: #fff;
      margin-bottom: 1em;
      padding: 1em;
      border-radius: 8px;
      box-shadow: 0 0 4px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h1>Badplatser i Västra Götalandsregionen</h1>
  <div id="output">Laddar data...</div>

  <script>
    async function loadBathingSites() {
      const proxy = 'https://corsproxy.io/?';
      const url = proxy + encodeURIComponent('https://gw.havochvatten.se/external-public/bathing-waters/v2/bathing-waters?countyName=Västra Götalands län');

      try {
        const res = await fetch(url);
        const data = await res.json();
        const container = document.getElementById('output');
        container.innerHTML = '';

        if (!data.bathingWaters || data.bathingWaters.length === 0) {
          container.textContent = 'Inga badplatser hittades.';
          return;
        }

        for (const place of data.bathingWaters) {
          const name = place.name;
          const desc = place.description || '';
          const type = place.waterTypeIdText || '';
          const municipality = place.municipality?.name || '';

          const div = document.createElement('div');
          div.className = 'badplats';
          div.innerHTML = `
            <h2>${name}</h2>
            <p><strong>Typ:</strong> ${type}</p>
            <p><strong>Kommun:</strong> ${municipality}</p>
            <p>${desc}</p>
          `;
          container.appendChild(div);
        }
      } catch (err) {
        console.error("Fel vid hämtning av badplatser:", err);
        document.getElementById('output').textContent = 'Kunde inte hämta data från API.';
      }
    }

    loadBathingSites();
  </script>
</body>
</html>
